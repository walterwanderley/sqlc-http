{{define "content"}}
{{if not (eq (.Query "nested") "true")}}
<div class="col">
{{template "hx-context.html" .}}
{{end}}

{{$pagination := .Pagination}}
    {{if $pagination}}
<div id="table_response">
{{end}}<div class="p-3">
    <a role="button" class="btn btn-success" hx-get="app/authors/create_author" hx-push-url="true"><i class="bi bi-plus">Create Author</i></a>
</div>
<div class="col-sm-12">
<table class="table table-hover">
    <thead><tr>
        <th>ID</th>
        <th>Name</th>
        <th>Bio</th>
        <th>Created At</th>
        <th></th> <!-- Ações -->
    </tr></thead>
    <tbody>
        {{range $i, $v := .Data}}<tr id="row_{{$i}}" scope="row">
        <td>{{$v.ID}}</td>
        <td>{{$v.Name}}</td>
        <td>{{$v.Bio}}</td>
        <td>{{if $v.CreatedAt}}{{$v.CreatedAt.Format "02/01/2006"}}{{end}}</td>
        <td>
            <a class="btn btn-outline-primary" 
  	href="javascript: void(0)" hx-push-url="true" hx-get="authors/{{$v.ID}}"><i class="bi bi-eye"></i></a>
            <a class="btn btn-outline-secondary"  
  	href="javascript: void(0)" hx-push-url="true" hx-get="authors/{{$v.ID}}?edit"><i class="bi bi-pencil"></i></a>
            <a class="btn btn-outline-danger" 
  	href="javascript: void(0)" hx-delete="authors/{{$v.ID}}" hx-swap="outerHTML"
	hx-target="#row_{{$i}}" hx-confirm="Are you shure?"><i class="bi bi-trash"></i></a>
        </td>
        </tr>{{end}}
    </tbody>
</table>
</div>
    
    {{$pagination := .Pagination}}
    {{if $pagination}}
    <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center" hx-target="#table_response" hx-swap="outerHTML">
        <li class="page-item{{if eq $pagination.Offset 0}} disabled{{end}}">
            <a class="page-link" href="javascript: void(0)" hx-get="{{$pagination.URL $pagination.Limit $pagination.Prev}}"><span aria-hidden="true">&laquo;</span></a>
        </li>
        <li class="page-item">
            <p class="page-link">{{$pagination.From}} - {{$pagination.To}}</p>
        </li>
        <li class="page-item">
            <a class="page-link" href="javascript: void(0)" hx-get="{{$pagination.URL $pagination.Limit $pagination.Next}}"><span aria-hidden="true">&raquo;</span></a>
        </li>
        <li class="page-item">
            <select class="form-select" name="limit" hx-get="{{$pagination.URL -1 $pagination.Offset}}">
                <option value="10" {{if eq $pagination.Limit 10}}selected{{end}}>10 items</option>
                <option value="25" {{if eq $pagination.Limit 25}}selected{{end}}>25 items</option>
                <option value="50" {{if eq $pagination.Limit 50}}selected{{end}}>50 items</option>
            </select>            
        </li>        
    </ul>
    </nav>
</div>
{{end}}{{if not (eq (.Query "nested") "true")}}
</div>
{{end}}
{{end}}